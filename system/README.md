[toc]

# 시스템의 세계에 입문하기

> - 참고한 도서 및 사이트
>
>   - 가상 면접 사례로 배우는 대규모 시스템 설계 기초(알렉스 쉬 저)
>
>     



## 시스템 확장을 위한 기법

- 웹 계층은 무상태 계층으로
  - 서버가 상태정보를 가지지 않도록 하는 것.
  - 서버가 상태정보를 가지는 순간 서버 확장 시 같은 클라이언트의 요청은 항상 같은 서버로만 전송되어야 한다는 문제가 발생한다.
  - 이를 위해서 사용자 세션 데이터와 같은 상태 정보를 웹 계층에서 제거해야 한다.
  - 보통 상태 정보를 관계형데이터베이스나 NoSQL같은 지속성 저장소에 보관하고, 필요할 때 가져오는 것.
- 모든 계층에 다중화 도입
- 가능한 한 많은 데이터를 캐싱하기
- 데이터 센터 지원
- 정적 콘텐츠 CDN을 통해 서비스하기
- 데이터 계층은 샤딩을 통해 규모 확장하기
  - 샤딩이란 대규모 데이터베이스를 샤드라고 부르는 작은 단위로 분할하는 기술을 말한다.
  - 샤딩할때는 샤딩 키를 데이터를 고르게 분할할 수 있도록 정하는 것이 중요햐다.
- 각 계층은 독립적 서비스로 분할하기
- 시스템을 지속적인 모니터링, 자동화 도구를 활용하기



## 시스템 설계에 필요한 요구사항들

- 만들어야 하는 기능
- 사용자 수/트래픽
- 기존 기술 스택 혹은 서비스



## 처리율 제한 장치의 설계

### API에 처리율 제한 장치를 두어야 하는 이유

1. Dos공격에 의한 자원 고갈을 방지할 수 있다.
2. 서버 확장 비용 절감 및 우선순위에 따라 더 많은 자원 할당 가능
3. 서버 과부하 방지

### 처리율 제한 장치를 어디에 둘 것인가?

- 클라이언트 측
  - 클라이언트 요청은 쉽게 위변조가 가능하므로 보안측면에서 안정적이지 않다는 단점
- 서버 측
- 미들웨어
  - API 게이트웨이 - 클라우드마이크로서비스에서 사용하는 구현방법

### 처리율 제한 알고리즘

- 토큰 버킷
- 누출 버킷
- 고정 윈도 카운터
- 이동 윈도 로그
- 이동 윈도 카운터



## 안정 해시 설계

